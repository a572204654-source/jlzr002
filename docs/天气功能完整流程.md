# ğŸ“ å¤©æ°”åŠŸèƒ½å®Œæ•´æµç¨‹å›¾

## ğŸ¯ åŠŸèƒ½æ¦‚è§ˆ

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜å°ç¨‹åºå¦‚ä½•**é€šè¿‡ç”¨æˆ·å®šä½è·å–å¤©æ°”ä¿¡æ¯**çš„å®Œæ•´æµç¨‹ã€‚

---

## ğŸ“Š å®Œæ•´æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·æ‰“å¼€å°ç¨‹åº                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  æ£€æŸ¥å®šä½æƒé™            â”‚
        â”‚  wx.getSetting()        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                â”‚
    å·²æˆæƒ â”‚                â”‚ æœªæˆæƒ
          â–¼                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ç›´æ¥è·å–  â”‚      â”‚ è¯·æ±‚æˆæƒ      â”‚
    â”‚å®šä½ä¿¡æ¯  â”‚      â”‚ wx.authorize()â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚                   â”‚
         â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚           â”‚                â”‚
         â”‚      æˆæƒæˆåŠŸâ”‚         æˆæƒå¤±è´¥â”‚
         â”‚           â–¼                â–¼
         â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚     â”‚è·å–å®šä½  â”‚      â”‚å¼•å¯¼ç”¨æˆ·   â”‚
         â”‚     â”‚         â”‚      â”‚æ‰“å¼€è®¾ç½®   â”‚
         â”‚     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                             â”‚
                             â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  è·å–å®šä½ä¿¡æ¯      â”‚
                  â”‚  wx.getLocation() â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                â”‚
              æˆåŠŸ  â”‚                â”‚ å¤±è´¥
                    â–¼                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ è·å¾—ç»çº¬åº¦åæ ‡     â”‚  â”‚ æç¤ºç”¨æˆ·  â”‚
         â”‚ longitude, latitudeâ”‚  â”‚ å®šä½å¤±è´¥  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ è°ƒç”¨åç«¯å¤©æ°”æ¥å£      â”‚
         â”‚ GET /api/weather/now â”‚
         â”‚ ?location=ç»åº¦,çº¬åº¦   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                   â”‚
    æˆåŠŸ â”‚                   â”‚ å¤±è´¥
         â–¼                   â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ è¿”å›å¤©æ°”æ•°æ®  â”‚    â”‚ è¿”å›é”™è¯¯ä¿¡æ¯  â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  è§£æå¤©æ°”æ•°æ®         â”‚
  â”‚  - æ¸©åº¦              â”‚
  â”‚  - å¤©æ°”çŠ¶å†µ           â”‚
  â”‚  - æ¹¿åº¦ã€é£åŠ›ç­‰       â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  åœ¨ç•Œé¢æ˜¾ç¤ºå¤©æ°”ä¿¡æ¯   â”‚
  â”‚  - å½“å‰æ¸©åº¦           â”‚
  â”‚  - å¤©æ°”å›¾æ ‡           â”‚
  â”‚  - è¯¦ç»†ä¿¡æ¯           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ æ•°æ®æµå‘å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å°ç¨‹åºç«¯    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. è·å–å®šä½
       â”‚ wx.getLocation()
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç»çº¬åº¦: 116.41,39.92 â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 2. HTTP è¯·æ±‚
       â”‚ GET /api/weather/now
       â”‚ ?location=116.41,39.92
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åç«¯æœåŠ¡    â”‚
â”‚  Express.js  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 3. ç”Ÿæˆ JWT Token
       â”‚ utils/qweather-jwt.js
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  JWT Token           â”‚
â”‚  (æœ‰æ•ˆæœŸ1å°æ—¶)        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 4. è¯·æ±‚å’Œé£å¤©æ°” API
       â”‚ Authorization: Bearer token
       â”‚ GET /v7/weather/now
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å’Œé£å¤©æ°” API â”‚
â”‚  QWeather    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 5. è¿”å›å¤©æ°”æ•°æ®
       â”‚ JSON æ ¼å¼
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åç«¯æœåŠ¡    â”‚
â”‚  æ ¼å¼åŒ–æ•°æ®   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 6. è¿”å›ç»™å°ç¨‹åº
       â”‚ ç»Ÿä¸€å“åº”æ ¼å¼
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å°ç¨‹åºç«¯    â”‚
â”‚  æ˜¾ç¤ºå¤©æ°”     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ä»£ç å®ç°å¯¹ç…§

### 1ï¸âƒ£ å°ç¨‹åºç«¯ - è·å–å®šä½

**ä»£ç ä½ç½®**: `miniapp-example/weather-with-location.js`

```javascript
// ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥æƒé™
wx.getSetting({
  success: (res) => {
    if (res.authSetting['scope.userLocation']) {
      // å·²æˆæƒ â†’ ç›´æ¥è·å–å®šä½
      getLocation()
    } else {
      // æœªæˆæƒ â†’ è¯·æ±‚æˆæƒ
      wx.authorize({ scope: 'scope.userLocation' })
    }
  }
})

// ç¬¬äºŒæ­¥ï¼šè·å–å®šä½
wx.getLocation({
  type: 'wgs84',
  success: (res) => {
    const { longitude, latitude } = res
    // å¾—åˆ°: longitude = 116.41, latitude = 39.92
    
    // ç¬¬ä¸‰æ­¥ï¼šè°ƒç”¨å¤©æ°”æ¥å£
    fetchWeather(longitude, latitude)
  }
})
```

---

### 2ï¸âƒ£ å°ç¨‹åºç«¯ - è¯·æ±‚å¤©æ°”æ•°æ®

```javascript
function fetchWeather(longitude, latitude) {
  wx.request({
    url: 'https://your-domain.com/api/weather/now',
    method: 'GET',
    data: {
      location: `${longitude},${latitude}` // "116.41,39.92"
    },
    success: (res) => {
      // res.data = {
      //   code: 0,
      //   message: "è·å–å®æ—¶å¤©æ°”æˆåŠŸ",
      //   data: { temp: "8", text: "é›¾", ... }
      // }
      const weather = res.data.data.data
      console.log('æ¸©åº¦:', weather.temp)
      console.log('å¤©æ°”:', weather.text)
    }
  })
}
```

---

### 3ï¸âƒ£ åç«¯ - è·¯ç”±å¤„ç†

**ä»£ç ä½ç½®**: `routes/weather.js` (ç¬¬37-58è¡Œ)

```javascript
router.get('/now', async (req, res) => {
  const { location } = req.query // "116.41,39.92"
  
  // å‚æ•°éªŒè¯
  if (!location) {
    return badRequest(res, 'ç¼ºå°‘ä½ç½®å‚æ•°')
  }
  
  // è°ƒç”¨å’Œé£å¤©æ°” API
  const result = await getWeatherNow(location)
  
  if (result.success) {
    return success(res, result, 'è·å–å®æ—¶å¤©æ°”æˆåŠŸ')
  } else {
    return serverError(res, result.error)
  }
})
```

---

### 4ï¸âƒ£ åç«¯ - è°ƒç”¨å’Œé£å¤©æ°” API

**ä»£ç ä½ç½®**: `utils/qweather.js`

```javascript
async function getWeatherNow(location) {
  try {
    // 1. ç”Ÿæˆ JWT Token
    const token = await getQWeatherToken()
    
    // 2. è¯·æ±‚å’Œé£å¤©æ°” API
    const response = await axios.get('/v7/weather/now', {
      baseURL: config.qweather.apiHost,
      headers: {
        'Authorization': `Bearer ${token}`
      },
      params: { location }
    })
    
    // 3. è¿”å›æ•°æ®
    return {
      success: true,
      data: response.data.now,
      updateTime: response.data.updateTime
    }
  } catch (error) {
    return {
      success: false,
      error: error.message
    }
  }
}
```

---

### 5ï¸âƒ£ åç«¯ - ç”Ÿæˆ JWT Token

**ä»£ç ä½ç½®**: `utils/qweather-jwt.js`

```javascript
async function getQWeatherToken() {
  // æ£€æŸ¥ç¼“å­˜
  if (tokenCache && tokenCache.expireTime > Date.now()) {
    return tokenCache.token
  }
  
  // ç”Ÿæˆæ–° Token
  const jwt = new SignJWT({ sub: projectId })
    .setProtectedHeader({ alg: 'EdDSA', typ: 'JWT', kid: keyId })
    .setIssuedAt()
    .setExpirationTime('1h')
  
  const token = await jwt.sign(privateKey)
  
  // ç¼“å­˜ Token
  tokenCache = {
    token: token,
    expireTime: Date.now() + 60 * 60 * 1000 // 1å°æ—¶
  }
  
  return token
}
```

---

## ğŸ” æƒé™é…ç½®

### app.json

```json
{
  "pages": ["pages/weather/weather"],
  "permission": {
    "scope.userLocation": {
      "desc": "æ‚¨çš„ä½ç½®ä¿¡æ¯å°†ç”¨äºè·å–å½“åœ°å¤©æ°”"
    }
  },
  "requiredPrivateInfos": [
    "getLocation"
  ]
}
```

---

## ğŸ“¦ å“åº”æ•°æ®ç»“æ„

### åç«¯ç»Ÿä¸€å“åº”æ ¼å¼

```json
{
  "code": 0,                    // 0=æˆåŠŸ, å…¶ä»–=é”™è¯¯
  "message": "è·å–å®æ—¶å¤©æ°”æˆåŠŸ",
  "data": {
    "success": true,
    "data": {
      "temp": "8",              // æ¸©åº¦
      "text": "é›¾",             // å¤©æ°”çŠ¶å†µ
      "icon": "501",            // å¤©æ°”å›¾æ ‡ä»£ç 
      "feelsLike": "7",         // ä½“æ„Ÿæ¸©åº¦
      "humidity": "91",         // æ¹¿åº¦
      "windDir": "å—é£",        // é£å‘
      "windScale": "1",         // é£åŠ›ç­‰çº§
      "windSpeed": "3",         // é£é€Ÿ
      "pressure": "1028",       // æ°”å‹
      "vis": "5",               // èƒ½è§åº¦
      "cloud": "100",           // äº‘é‡
      "dew": "6"                // éœ²ç‚¹æ¸©åº¦
    },
    "updateTime": "2025-11-08T20:51+08:00"
  },
  "timestamp": 1699200000000
}
```

---

## âš¡ æ€§èƒ½ä¼˜åŒ–

### 1. JWT Token ç¼“å­˜
```
é¦–æ¬¡è¯·æ±‚: ç”Ÿæˆ Token â†’ ç¼“å­˜1å°æ—¶
åç»­è¯·æ±‚: ç›´æ¥ä½¿ç”¨ç¼“å­˜çš„ Token
```

### 2. å¤©æ°”æ•°æ®ç¼“å­˜ï¼ˆå¯é€‰ï¼‰
```javascript
// å°ç¨‹åºç«¯ç¼“å­˜
wx.setStorageSync('weather_data', weatherData)
wx.setStorageSync('weather_time', Date.now())

// 5åˆ†é’Ÿå†…ç›´æ¥ä½¿ç”¨ç¼“å­˜
const cacheTime = wx.getStorageSync('weather_time')
if (Date.now() - cacheTime < 5 * 60 * 1000) {
  const cachedData = wx.getStorageSync('weather_data')
  return cachedData
}
```

### 3. æ¥å£åˆå¹¶
ä½¿ç”¨ `/api/weather/comprehensive` ä¸€æ¬¡è·å–æ‰€æœ‰æ•°æ®ï¼š
```
- å®æ—¶å¤©æ°”
- 7å¤©é¢„æŠ¥  
- 24å°æ—¶é¢„æŠ¥
- ç©ºæ°”è´¨é‡
- å¤©æ°”é¢„è­¦
```

---

## âŒ é”™è¯¯å¤„ç†æµç¨‹

```
å®šä½å¤±è´¥
  â”œâ”€ ç”¨æˆ·æ‹’ç»æˆæƒ â†’ å¼•å¯¼åˆ°è®¾ç½®é¡µé¢
  â”œâ”€ å®šä½æœåŠ¡å…³é—­ â†’ æç¤ºæ‰“å¼€å®šä½
  â””â”€ å…¶ä»–é”™è¯¯ â†’ æ˜¾ç¤ºé”™è¯¯æç¤º

å¤©æ°”æ¥å£å¤±è´¥
  â”œâ”€ ç½‘ç»œé”™è¯¯ â†’ æç¤ºæ£€æŸ¥ç½‘ç»œ
  â”œâ”€ å‚æ•°é”™è¯¯ â†’ è¿”å› 400 é”™è¯¯
  â”œâ”€ JWT å¤±è´¥ â†’ è‡ªåŠ¨é‡è¯•ç”Ÿæˆæ–° Token
  â””â”€ å’Œé£å¤©æ°” API é”™è¯¯ â†’ è¿”å›é”™è¯¯ä¿¡æ¯
```

---

## ğŸ¨ ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### åŠ è½½çŠ¶æ€

```xml
<view wx:if="{{loading}}" class="loading">
  <image src="/images/loading.gif"></image>
  <text>æ­£åœ¨è·å–å¤©æ°”...</text>
</view>
```

### é”™è¯¯æç¤º

```javascript
wx.showToast({
  title: 'å®šä½å¤±è´¥ï¼Œè¯·æ£€æŸ¥å®šä½æƒé™',
  icon: 'none',
  duration: 2000
})
```

### ä¸‹æ‹‰åˆ·æ–°

```javascript
onPullDownRefresh() {
  this.loadWeather().then(() => {
    wx.stopPullDownRefresh()
  })
}
```

---

## ğŸ” è°ƒè¯•æŠ€å·§

### 1. æŸ¥çœ‹å®šä½ä¿¡æ¯

```javascript
wx.getLocation({
  success: (res) => {
    console.log('å®šä½æˆåŠŸ:')
    console.log('ç»åº¦:', res.longitude)
    console.log('çº¬åº¦:', res.latitude)
    console.log('ç²¾åº¦:', res.accuracy, 'ç±³')
  }
})
```

### 2. æµ‹è¯•å›ºå®šåæ ‡

```javascript
// ä¸è°ƒç”¨ getLocationï¼Œç›´æ¥ä½¿ç”¨å›ºå®šåæ ‡æµ‹è¯•
const location = '116.41,39.92' // åŒ—äº¬
fetchWeather(location)
```

### 3. æŸ¥çœ‹åç«¯é…ç½®

```bash
curl http://localhost/api/weather/debug-config
```

---

## ğŸ“Š æ—¶åºå›¾

```
å°ç¨‹åº       åç«¯        å’Œé£å¤©æ°”
  â”‚           â”‚             â”‚
  â”‚â”€è·å–å®šä½â”€â”€â”€â”‚             â”‚
  â”‚           â”‚             â”‚
  â”‚â”€è¯·æ±‚å¤©æ°”â”€â”€â†’â”‚             â”‚
  â”‚           â”‚             â”‚
  â”‚           â”‚â”€ç”ŸæˆJWTâ”€â”€â”€â”€â†’â”‚
  â”‚           â”‚             â”‚
  â”‚           â”‚â†è¿”å›Tokenâ”€â”€â”€â”‚
  â”‚           â”‚             â”‚
  â”‚           â”‚â”€è¯·æ±‚å¤©æ°”â”€â”€â”€â”€â†’â”‚
  â”‚           â”‚             â”‚
  â”‚           â”‚â†è¿”å›æ•°æ®â”€â”€â”€â”€â”‚
  â”‚           â”‚             â”‚
  â”‚â†è¿”å›å¤©æ°”â”€â”€â”‚             â”‚
  â”‚           â”‚             â”‚
  â”‚â”€æ˜¾ç¤ºç•Œé¢â”€ â”‚             â”‚
```

---

## âœ… å®Œæˆæ£€æŸ¥æ¸…å•

### åç«¯é…ç½®
- [x] å’Œé£å¤©æ°” JWT é…ç½®å®Œæˆ
- [x] ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®
- [x] å¤©æ°”è·¯ç”±å·²æ³¨å†Œ
- [x] JWT Token è‡ªåŠ¨ç”Ÿæˆå’Œç¼“å­˜

### æ¥å£åŠŸèƒ½
- [x] æ”¯æŒç»çº¬åº¦æŸ¥è¯¢
- [x] æ”¯æŒåŸå¸‚ ID æŸ¥è¯¢
- [x] å®æ—¶å¤©æ°”æ¥å£å¯ç”¨
- [x] ç»¼åˆå¤©æ°”æ¥å£å¯ç”¨
- [x] å¤©æ°”é¢„æŠ¥æ¥å£å¯ç”¨
- [x] é”™è¯¯å¤„ç†å®Œå–„

### å°ç¨‹åºç«¯
- [x] å®šä½æƒé™é…ç½®
- [x] å®šä½æˆæƒæµç¨‹
- [x] å¤©æ°”æ¥å£è°ƒç”¨
- [x] æ•°æ®æ˜¾ç¤ºç•Œé¢
- [x] é”™è¯¯æç¤ºå¤„ç†

---

## ğŸ‰ æ€»ç»“

ç°åœ¨ä½ å¯ä»¥ï¼š

1. âœ… **åœ¨å°ç¨‹åºä¸­è·å–ç”¨æˆ·å®šä½**
2. âœ… **é€šè¿‡å®šä½æŸ¥è¯¢å½“åœ°å¤©æ°”**
3. âœ… **æ˜¾ç¤ºå®Œæ•´çš„å¤©æ°”ä¿¡æ¯**
4. âœ… **å¤„ç†å„ç§å¼‚å¸¸æƒ…å†µ**

å®Œæ•´çš„ä»£ç ç¤ºä¾‹åœ¨ï¼š
- `miniapp-example/weather-with-location.js` - å°ç¨‹åºç«¯ä»£ç 
- `routes/weather.js` - åç«¯è·¯ç”±
- `utils/qweather.js` - å¤©æ°” API å·¥å…·
- `utils/qweather-jwt.js` - JWT Token ç”Ÿæˆ

---

**æœ€åæ›´æ–°**: 2025-11-08  
**çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶æµ‹è¯•é€šè¿‡


